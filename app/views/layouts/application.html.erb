<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>MapAddr</title>
  <meta name="description" content="MapAddr Rails App.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <%= stylesheet_link_tag    "application", media: "all", "data-turbolinks-track" => true %>
  <%= javascript_include_tag "application", "data-turbolinks-track" => true %>
  <%= csrf_meta_tags %>
</head>
<body class="<%= params[:controller] %>_controller">

  <!-- Login -->
  <div class="modal fade" id="login" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title" id="myModalLabel">MapAddr</h4>
        </div>
        <div class="modal-body">

          <%= form_for @user_login, { url: session_path } do |f| %>
            <%= f.text_field :email, placeholder: 'Email', class: 'form-control' %>
            <%= f.password_field :password, placeholder: 'Password', class: 'form-control' %>
              <br>
            <%= f.submit 'Login', class: 'btn btn-primary' %>
          <% end %>

        </div>
      </div>
    </div>
  </div>

  <!-- Navbar -->
  <% if @has_navbar %>
    <nav class="navbar navbar-default" role="navigation">
      <div class="container-fluid">

        <!-- Mobile Navbar Button -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <%= link_to 'MapAddr', root_path, class: 'navbar-brand' %>
        </div>

        <!-- Search -->
        <form class="navbar-form navbar-left" role="search">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="Find a location">
          </div>
          <button type="submit" class="btn btn-default">Search</button>
        </form>

        <!-- Collapse Toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

          <!-- Navbar Right -->
          <ul class="nav navbar-nav navbar-right">

            <!-- Logged In -->
            <% if current_user %>
              <li><%= link_to "What up, #{current_user.name}!", edit_user_path(current_user.id) %></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-cogs"></i></a>
                <ul class="dropdown-menu" role="menu">
                  <li><%= link_to 'Account', edit_user_path(current_user.id) %></li>
                  <li class="divider"></li>
                  <li><%= link_to 'Log Out', session_path, method: :delete %></li>
                </ul>
              </li>
            <!-- Logged Out -->
            <% else %>
              <!-- Note: URL Path ends in '?'' -->
              <li><%= button_to 'Sign Up', welcome_path, method: :get, class: 'btn btn-default navbar-btn' %></li>
              <li><button type="submit" class="btn btn-default navbar-btn" data-toggle="modal" data-target="#login">Log In</button></li>
            <% end %>

          </ul> <!-- end navbar-right -->

        </div> <!-- end collapse -->

      </div> <!-- end container-fluid -->
    </nav>
  <% end %>
  
  <!-- Content -->
  <div class="container-fluid">
    <%= yield %>
  </div>

</body>
</html>
